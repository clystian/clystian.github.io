---
import data from '../../manfred.json';
const jobs = data.experience.jobs;
const formatRange = (start, end) => {
  const startStr = new Date(start).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
  const endStr = end ? new Date(end).toLocaleDateString('en-US', { month: 'long', year: 'numeric' }) : 'Present';
  return `${startStr} â€“ ${endStr}`;
};
---
<section id="experience" class="py-16 bg-gray-100">
  <div class="container mx-auto">
    <h2 class="text-2xl font-bold mb-8">Experience</h2>
    <div class="space-y-8">
      {jobs.map(job =>
        job.roles.map(role => (
          <div class="border-l-4 border-blue-600 pl-6 relative" style="margin-left:1.5rem;">
            <div class="absolute -left-7 top-0 bg-blue-600 rounded-full w-4 h-4"></div>
            <div class="mb-2 text-sm text-gray-500">{formatRange(role.startDate, role.finishDate)}</div>
            <h3 class="text-xl font-semibold">{job.organization.name}</h3>
            <h4 class="text-md font-medium mb-1">{role.name}</h4>
            {role.challenges && role.challenges.length > 0 && (
              <p class="text-gray-700">{role.challenges[0].description}</p>
            )}
          </div>
        ))
      )}
    </div>
  </div>
</section>
